<section class="container search-container">
  <h1 class="main-title">Cognos Knowledge Hub</h1>
  <p class="subtitle">Centralized technical knowledge base for IBM Cognos Analytics</p>

  <form (submit)="search(); $event.preventDefault()" class="filters">
    <div class="filter">
      <label for="keyword">Keyword</label>
      <input
        id="keyword"
        [(ngModel)]="keyword"
        name="keyword"
        placeholder="Search by title or error code..."
      />
    </div>

    <div class="filter">
      <label for="version">Version</label>
      <select id="version" [(ngModel)]="version" name="version">
        <option value="">All</option>
        <option *ngFor="let v of versions" [value]="v">{{ v }}</option>
      </select>
    </div>

    <div class="filter">
      <label for="category">Category</label>
      <select id="category" [(ngModel)]="category" name="category">
        <option value="">All</option>
        <option *ngFor="let c of categories" [value]="c">{{ c }}</option>
      </select>
    </div>

    <div class="filter">
      <label for="module">Module</label>
      <select id="module" [(ngModel)]="module" name="module">
        <option value="">All</option>
        <option *ngFor="let m of modules" [value]="m">{{ m }}</option>
      </select>
    </div>

    <div class="actions">
      <button type="submit">Search</button>
      <button type="button" class="secondary" (click)="clearFilters()">Clear</button>
    </div>
  </form>

  <!-- Loader -->
  <section *ngIf="loading" class="loading">Loading results...</section>

  <!-- Results -->
  <section *ngIf="!loading && results.length" class="results">
    <article *ngFor="let a of results" class="card">
      <h3>{{ a.title }}</h3>
      <p>{{ a.summary }}</p>
      <p class="meta">
        <span *ngIf="a.version">Version: {{ a.version }}</span>
        <span *ngIf="a.category"> Â· Category: {{ a.category }}</span>
        <span *ngIf="a.module"> Â· Module: {{ a.module }}</span>
      </p>
      <a [href]="a.source_url" target="_blank">View source</a>
    </article>
  </section>

  <!-- Empty message (only after searching) -->
  <p *ngIf="hasSearched && !loading && !results.length" class="empty">
    No results found for the selected filters.
  </p>

  <!-- View all articles button -->
  <div class="view-all">
    <a routerLink="/articles" class="view-all-btn">ðŸ“š View all articles</a>
  </div>
</section>
